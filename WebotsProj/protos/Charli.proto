#############################################
# CHARLI webots prototype file 
# Originally from VT 
# Converted and augmented by SJ
# 2012/3
#############################################

PROTO Charli [
  field SFVec3f    translation 0 1 0
  field SFRotation rotation 0 1 0 0
  field SFString   controller "void"
  field SFString   controllerArgs ""
  field SFBool     synchronization TRUE
  field SFString   name "CHARLI"
  field SFColor    plasticColor 0.301961 0.301961 0.301961
  field SFVec2f    cameraWindowPosition 0 0
  field SFFloat    cameraPixelSize 1.0
  field SFInt32    cameraWidth 160
  field SFInt32    cameraHeight 120
  field SFInt32    channel 0
#  field SFFloat    servoForce1 0.650000 #in Nm unit
#  field SFFloat    servoVelocity1 100
#  field SFFloat    servoForce2 65 #in Nm unit
#  field SFFloat    servoVelocity2 100
#  field SFFloat    servoP 15
]
{
Robot {
  translation IS translation
  rotation IS rotation
  controller IS controller
  controllerArgs IS controllerArgs
  synchronization IS synchronization
  name IS name
  children [
    DEF HipGroup Group {
      children [
        Shape {
	  appearance Appearance {
            material DEF DMetalMaterial Material { # New body material
              diffuseColor 0.7 0.7 0.7
              specularColor 0.401201 0.401201 0.401201
            }
          }
          geometry Box {
          size 0.186 0.022 0.069
          }
        }
      ]
    }
    DEF R_Hip_Yaw Servo {
      translation -0.07 -0.049 -0.0245
      children [
        DEF R_Hip_Roll Servo {
          rotation 0 0 1 0
          children [
            DEF R_Hip_Pitch Servo {
              rotation 1 0 0 0
              children [
                DEF Thigh Transform {
                  translation 0 -0.175 0
                  children [
                    Shape {
                      geometry Box {
                        size 0.016 0.3 0.0535
                      }
                    }
                  ]
                }
                DEF R_Knee_Pitch Servo {
                  translation 0 -0.35 0
                  rotation 1 0 0 0
                  children [
                    DEF R_Ankle_Pitch Servo {
                      translation 0 -0.35 0
                      rotation 1 0 0 0
                      children [
                        DEF R_Ankle_Roll Servo {
                          rotation 0 0 1 0
                          children [
                            DEF Foot Transform {
                              translation -0.0075 -0.071 0.03
                              children [
                                DEF Foot Shape {
                                  geometry Box {
                                    size 0.145 0.008 0.28
                                  }
                                }
                              ]
                            }
                          ]
                          name "R_Ankle_Roll"
                          boundingObject DEF Foot Transform {
                            translation -0.0075 -0.071 0.03
                            children [
                              DEF Foot Shape {
                                geometry Box {
                                  size 0.145 0.008 0.28
                                }
                              }
                            ]
                          }
                          physics DEF Physics_Foot Physics {
			    density -1
                            mass 0.886
                            centerOfMass -0.003 -0.04 0.006  
                          }
                          maxForce 100
                        }
                      ]
                      name "R_Ankle_Pitch"
                      boundingObject Shape {
                        geometry Sphere {
                          radius 0.001
                        }
                      }
                      physics Physics {
                      }
                      maxVelocity 100
                      maxForce 100
                    }
                    DEF Shin Transform {
                      translation 0 -0.175 0
                      children [
                        Shape {
                          geometry Box {
                            size 0.016 0.3 0.063
                          }
                        }
                      ]
                    }
                  ]
                  name "R_Knee_Pitch"
                  boundingObject DEF Shin Transform {
                    translation 0 -0.175 0
                    children [
                      Shape {
                        geometry Box {
                          size 0.016 0.3 0.063
                        }
                      }
                    ]
                  }
                  physics DEF Physics_Shin Physics {
                    density -1
                    mass 0.783
                    centerOfMass -0.001 -0.16 0                   
                  }
                  maxVelocity 100
                  maxForce 100
                }
              ]
              name "R_Hip_Pitch"
              boundingObject DEF Thigh Transform {
                translation 0 -0.175 0
                children [
                  Shape {
                    geometry Box {
                      size 0.016 0.3 0.0535
                    }
                  }
                ]
              }
              physics DEF Physics_Thigh Physics {
                density -1
                mass 1.729
                centerOfMass 0 -0.148 0
                
              }
              maxVelocity 100
              maxForce 100
            }
          ]
          name "R_Hip_Roll"
          boundingObject Shape {
            geometry Sphere {
              radius 0.001
            }
          }
          physics Physics {
          }
          maxVelocity 100
          maxForce 100
        }
      ]
      name "R_Hip_Yaw"
      description "R_Hip_Yaw"
      boundingObject DEF NULLSPHERE Shape {
        geometry Sphere {
          radius 0.001
        }
      }
      physics Physics {
      }
      maxVelocity 100
      maxForce 100
    }
    DEF L_Hip_Yaw Servo {
      translation 0.07 -0.049 -0.0245
      children [
        DEF L_Hip_Roll Servo {
          rotation 0 0 1 0
          children [
            DEF L_Hip_Pitch Servo {
              rotation 1 0 0 0
              children [
                DEF L_Knee_Pitch Servo {
                  translation 0 -0.35 0
                  rotation 1 0 0 0
                  children [
                    DEF L_Ankle_Pitch Servo {
                      translation 0 -0.35 0
                      rotation 1 0 0 0
                      children [
                        DEF L_Ankle_Roll Servo {
                          rotation 0 0 1 0
                          children [
                            DEF L_Foot_Transform Transform {
                              translation 0.0075 -0.071 0.03
                              children [
                                Shape {
                                  geometry Box {
                                    size 0.145 0.0089 0.28
                                  }
                                }
                              ]
                            }
                          ]
                          name "L_Ankle_Roll"
                          boundingObject DEF L_Foot_Transform Transform {
                            translation 0.0075 -0.071 0.03
                            children [
                              Shape {
                                geometry Box {
                                  size 0.145 0.0089 0.28
                                }
                              }
                            ]
                          }
                          physics Physics {
                            density -1
                            mass 0.886
                            centerOfMass 0.003 -0.04 0.006
                         
                          }
                          maxForce 100
                        }
                      ]
                      name "L_Ankle_Pitch"
                      boundingObject DEF NULLSPHERE Shape {
                        geometry Sphere {
                          radius 0.001
                        }
                      }
                      physics Physics {
                      }
                      maxVelocity 100
                      maxForce 100
                    }
                    USE Shin
                  ]
                  name "L_Knee_Pitch"
                  boundingObject USE Shin
                  physics Physics {
                    density -1
                    mass 0.783
                    centerOfMass 0.001 -0.16 0
                    
                  }
                  maxVelocity 100
                  maxForce 100
                }
                USE Thigh
              ]
              name "L_Hip_Pitch"
              boundingObject USE Thigh
              physics DEF Physics_Thigh Physics {
                density -1
                mass 1.729
                centerOfMass 0 -0.148 0
               
              }
              maxVelocity 100
              maxForce 100
            }
          ]
          name "L_Hip_Roll"
          boundingObject USE NULLSPHERE
          physics Physics {
          }
          maxVelocity 100
          maxForce 100
        }
      ]
      name "L_Hip_Yaw"
      boundingObject USE NULLSPHERE
      physics Physics {
      }
      maxVelocity 100
      maxForce 100
    }
    DEF Waist_Roll Servo {
      rotation 0 0 1 0
      children [
#Sensors/recievers added by SJ
	DEF zero GPS {
      name "zero"
    }
       Accelerometer {
     	 translation 0 -0.0684064 -0.01
         rotation 1 0 0 1.5708
         name "Accelerometer"
         lookupTable [
           -39.24 0 0
           39.24 1024 0
         ]
       }
       Gyro {
         translation 0 -0.0684064 0.01
         rotation -0.57735 0.57735 0.57735 2.0944
         name "Gyro"
         lookupTable [
           -27.925 0 0
           27.925 1024 0
         ]
       }
       DEF RECEIVER Receiver {
        name "receiver"
        channel IS channel
       }
       DEF EMITTER Emitter {
        name "emitter"
        channel IS channel
       }
        DEF SUPER_EMITTER Emitter {
          name "super_emitter"
          channel 2
        }
#End sensors/emitters

#SJ: Darwin-OP head system graft (camera and led too)
	DEF DNeck Servo {
	      translation 0 0.42 0.03
	      rotation 0 1 0 0
	      children [
		DEF DNeckShape Shape {
		  appearance Appearance {
		    material DEF DMetalMaterial Material {
		      diffuseColor 0.7 0.7 0.7
		      specularColor 0.401201 0.401201 0.401201
		    }
		  }
                  geometry Box {
                     size 0.02 0.02 0.02
                  }
		}
		DEF DHead Servo {
	          translation 0 0.02 0 # charli value
		  rotation 1 0 0 0
		  children [
		    DEF DHeadShape Group {
		      children [
		        Shape {
		          appearance Appearance {
		            material DEF DPlasticMaterial Material {
		 	      diffuseColor IS plasticColor
			      specularColor 0.401201 0.401201 0.401201
			    }
		          }
		          geometry IndexedFaceSet {
		            coord DEF DHeadCoord Coordinate {
		              point [
		                0.0392305 0.0221018 -0.0570645
		                -0.0392305 0.0221018 -0.0570645
		                0.0405922 0.0152099 -0.0401748
		                -0.0405922 0.0152099 -0.0401748
		                0.0411355 0.0081425 -0.0334363
		                -0.0411355 0.0081425 -0.0334363
		                0.0416294 -0.0007687 -0.0273103
		                -0.0416294 -0.0007687 -0.0273103
		                0.0424073 -0.0072215 -0.0176621
		                -0.0424073 -0.0072215 -0.0176621
		                0.0433401 -0.0086732 -0.0060919
		                -0.0433401 -0.0086732 -0.0060919
		                0.044197 -0.0061456 0.0045363
		                -0.044197 -0.0061456 0.0045363
		                0.0449545 0.0006532 0.0139317
		                -0.0449545 0.0006532 0.0139317
		                0.0452514 0.0108622 0.0176143
		                -0.0452514 0.0108622 0.0176143
		                0.0452514 0.0212564 0.0176141
		                -0.0452514 0.0212564 0.0176141
		                0.0449057 0.0300627 0.0137528
		                -0.0449057 0.0300627 0.0137528
		                0.0442507 0.0353979 0.0052024
		                -0.0442507 0.0353979 0.0052024
		                0.0433849 0.0381032 -0.0055372
		                -0.0433849 0.0381032 -0.0055372
		                0.038476 0.0363362 -0.0664233
		                -0.038476 0.0363362 -0.0664233
		                0.0116412 0.0265999 0.0366955
		                -0.0116412 0.0265999 0.0366955
		                0.0152554 0.0218632 0.0363648
		                -0.0152554 0.0218632 0.0363648
		                0.0201309 0.0187384 0.0349243
		                -0.0201309 0.0187384 0.0349243
		                0.0255253 0.0177015 0.0325931
		                -0.0255253 0.0177015 0.0325931
		                0.0306174 0.0189101 0.0297263
		                -0.0306174 0.0189101 0.0297263
		                0.034632 0.0221804 0.0267603
		                -0.034632 0.0221804 0.0267603
		                0.0369579 0.0270145 0.0241466
		                -0.0369579 0.0270145 0.0241466
		                0.037241 0.0326763 0.0222832
		                -0.037241 0.0326763 0.0222832
		                0.0354382 0.038304 0.0214537
		                -0.0354382 0.038304 0.0214537
		                0.0318239 0.0430408 0.0217844
		                -0.0318239 0.0430408 0.0217844
		                0.0269485 0.0461655 0.023225
		                -0.0269485 0.0461655 0.023225
		                0.0215541 0.0472024 0.0255561
		                -0.0215541 0.0472024 0.0255561
		                0.016462 0.0459938 0.0284229
		                -0.016462 0.0459938 0.0284229
		                0.0124474 0.0427235 0.0313889
		                -0.0124474 0.0427235 0.0313889
		                0.0101215 0.0378894 0.0340026
		                -0.0101215 0.0378894 0.0340026
		                0.0098384 0.0322276 0.035866
		                -0.0098384 0.0322276 0.035866
		                0.0174415 0.0294527 0.0329804
		                -0.0174415 0.0294527 0.0329804
		                0.0192939 0.0270251 0.032811
		                -0.0192939 0.0270251 0.032811
		                0.0217926 0.0254236 0.0320726
		                -0.0217926 0.0254236 0.0320726
		                0.0245573 0.0248921 0.0308779
		                -0.0245573 0.0248921 0.0308779
		                0.0271671 0.0255116 0.0294086
		                -0.0271671 0.0255116 0.0294086
		                0.0292247 0.0271877 0.0278885
		                -0.0292247 0.0271877 0.0278885
		                0.0304167 0.0296652 0.026549
		                -0.0304167 0.0296652 0.026549
		                0.0305618 0.0325669 0.0255939
		                -0.0305618 0.0325669 0.0255939
		                0.0296378 0.0354512 0.0251688
		                -0.0296378 0.0354512 0.0251688
		                0.0277855 0.0378789 0.0253383
		                -0.0277855 0.0378789 0.0253383
		                0.0252868 0.0394803 0.0260766
		                -0.0252868 0.0394803 0.0260766
		                0.022522 0.0400118 0.0272713
		                -0.022522 0.0400118 0.0272713
		                0.0199123 0.0393923 0.0287406
		                -0.0199123 0.0393923 0.0287406
		                0.0178547 0.0377163 0.0302607
		                -0.0178547 0.0377163 0.0302607
		                0.0166627 0.0352387 0.0316003
		                -0.0166627 0.0352387 0.0316003
		                0.0165176 0.032337 0.0325553
		                -0.0165176 0.032337 0.0325553
		                0.0235397 0.032452 0.0290746
		                -0.0235397 0.032452 0.0290746
		                0.0195178 0.0464315 -0.0795508
		                -0.0195178 0.0464315 -0.0795508
		                0.0225675 0.0325759 -0.07354
		                -0.0225675 0.0325759 -0.07354
		                0.0195174 0.016289 -0.0574006
		                -0.0195174 0.016289 -0.0574006
		                0.0186086 0.0055227 -0.0552789
		                -0.0186086 0.0055227 -0.0552789
		                0.0184255 -0.0009917 -0.051584
		                -0.0184255 -0.0009917 -0.051584
		                0.0186973 -0.0121609 -0.0394498
		                -0.0186973 -0.0121609 -0.0394498
		                0.0207908 -0.0194756 -0.0266185
		                -0.0207908 -0.0194756 -0.0266185
		                0.0185759 -0.0211818 -0.014516
		                -0.0185759 -0.0211818 -0.014516
		                0.0186379 -0.0196935 -0.001655
		                -0.0186379 -0.0196935 -0.001655
		                0.0187539 -0.0135358 0.0128219
		                -0.0187539 -0.0135358 0.0128219
		                0.018584 -0.0050813 0.024037
		                -0.018584 -0.0050813 0.024037
		                0.0164893 0.0066883 0.0349741
		                -0.0164893 0.0066883 0.0349741
		                0.0165623 0.0155422 0.0362219
		                -0.0165623 0.0155422 0.0362219
		                0.0170276 0.0499737 0.0249869
		                -0.0170276 0.0499737 0.0249869
		                0.01726 0.0553882 0.0150497
		                -0.01726 0.0553882 0.0150497
		                0.0120454 0.0605195 0.0046781
		                -0.0120454 0.0605195 0.0046781
		                0.0181589 0.0602533 -0.0062721
		                -0.0181589 0.0602533 -0.0062721
		                0.0195168 0.060201 -0.0189165
		                -0.0195168 0.060201 -0.0189165
		                0.0195174 0.0540533 -0.0540891
		                -0.0195174 0.0540533 -0.0540891
		                0 -0.0138808 -0.0402319
		                0 -0.0213466 -0.0278119
		                0 -0.0227678 -0.0144287
		                0 -0.022019 -1.81e-05
		                0 -0.0156556 0.0154359
		                0 -0.0061624 0.0265574
		                0 0.0074755 0.0378864
		                0 0.0175306 0.0379284
		                0 0.032467 0.0361502
		                0 0.0381629 0.0344413
		                0 0.045242 0.0309423
		                0 0.0488546 0.0285779
		                0 0.057406 0.0180599
		                0 0.0609716 0.0107532
		                0 0.060921 -0.0062633
		                0 0.0608675 -0.0189168
		                0 0.051912 -0.0393596
		                0 0.0386829 -0.0524273
		                0.0195171 0.0508041 -0.0384949
		                -0.0195171 0.0508041 -0.0384949
		                0.0195173 0.0380376 -0.0514338
		                -0.0195173 0.0380376 -0.0514338
		                0 0.0161334 -0.0593111
		                0 0.004431 -0.0571641
		                0 -0.0022158 -0.0534247
		                0.0291343 0.0417313 -0.0729934
		                -0.0291343 0.0417313 -0.0729934
		                0.0304317 0.0350942 -0.0702807
		                -0.0304317 0.0350942 -0.0702807
		                0.0297588 0.0190742 -0.0580713
		                -0.0297588 0.0190742 -0.0580713
		                0.031687 0.0160369 -0.0526305
		                -0.031687 0.0160369 -0.0526305
		                0.0309837 0.0092284 -0.0486846
		                -0.0309837 0.0092284 -0.0486846
		                0.030947 0.0028528 -0.0442747
		                -0.030947 0.0028528 -0.0442747
		                0.0313671 -0.0070052 -0.0342981
		                -0.0313671 -0.0070052 -0.0342981
		                0.0327293 -0.0142829 -0.0243646
		                -0.0327293 -0.0142829 -0.0243646
		                0.0320906 -0.0174994 -0.0152496
		                -0.0320906 -0.0174994 -0.0152496
		                0.0334606 -0.0171215 -0.0025047
		                -0.0334606 -0.0171215 -0.0025047
		                0.0348758 -0.0119176 0.010511
		                -0.0348758 -0.0119176 0.010511
		                0.0352073 -0.0039472 0.0212155
		                -0.0352073 -0.0039472 0.0212155
		                0.0303691 0.0014046 0.0276174
		                -0.0303691 0.0014046 0.0276174
		                0.0331355 0.0159014 0.0280857
		                -0.0331355 0.0159014 0.0280857
		                0.033055 0.0441668 0.018925
		                -0.033055 0.0441668 0.018925
		                0.0272452 0.0520301 0.0117203
		                -0.0272452 0.0520301 0.0117203
		                0.0274988 0.054967 0.0026082
		                -0.0274988 0.054967 0.0026082
		                0.0273044 0.0556295 -0.0065691
		                -0.0273044 0.0556295 -0.0065691
		                0.0276693 0.0543365 -0.0244786
		                -0.0276693 0.0543365 -0.0244786
		                0.0323266 0.0444186 -0.0491837
		                -0.0323266 0.0444186 -0.0491837
		                0.0417486 0.0375142 -0.0258325
		                -0.0417486 0.0375142 -0.0258325
		                0.0401123 0.0369252 -0.0461279
		                -0.0401123 0.0369252 -0.0461279
		                0.0070464 0.0573781 0.01728
		                -0.0070464 0.0573781 0.01728
		                0.0083894 0.0559858 0.019199
		                -0.0083894 0.0559858 0.019199
		                0.008978 0.0540208 0.0218855
		                -0.008978 0.0540208 0.0218855
		                0.0049843 0.051013 0.0258813
		                -0.0049843 0.051013 0.0258813
		                0.0381348 0.039614 0.0149968
		                -0.0381348 0.039614 0.0149968
		                0.0374798 0.0437726 0.0079673
		                -0.0374798 0.0437726 0.0079673
		                0.0368872 0.0477009 -0.0022339
		                -0.0368872 0.0477009 -0.0022339
		                0.0349777 0.0463099 -0.0278206
		                -0.0349777 0.0463099 -0.0278206
		                0 0.0572104 -0.0285718
		                0 0.0462024 -0.0462686
		                0.0195172 0.0456088 -0.0455197
		                -0.0195172 0.0456088 -0.0455197
		                0.0195174 0.0280225 -0.056562
		                -0.0195174 0.0280225 -0.056562
		                0 0.0286387 -0.0571265
		                0.0195169 0.0566908 -0.0283183
		                -0.0195169 0.0566908 -0.0283183
		              ]
		            }
		            coordIndex [
		              18, 16, 14, -1, 15, 17, 19, -1, 20, 18,
		              14, -1, 15, 19, 21, -1, 20, 14, 12, -1,
		              13, 15, 21, -1, 22, 20, 12, -1, 13, 21,
		              23, -1, 24, 22, 12, -1, 13, 23, 25, -1,
		              24, 12, 10, -1, 11, 13, 25, -1, 197, 24,
		              10, -1, 11, 25, 198, -1, 197, 10, 8, -1,
		              9, 11, 198, -1, 197, 8, 6, -1, 7, 9,
		              198, -1, 199, 197, 6, -1, 7, 198, 200, -1,
		              199, 6, 4, -1, 5, 7, 200, -1, 199, 4,
		              2, -1, 3, 5, 200, -1, 187, 48, 185, -1,
		              186, 49, 188, -1, 122, 48, 187, -1, 188, 49,
		              123, -1, 124, 122, 187, -1, 188, 123, 125, -1,
		              124, 187, 189, -1, 190, 188, 125, -1, 126, 124,
		              189, -1, 190, 125, 127, -1, 126, 189, 191, -1,
		              192, 190, 127, -1, 126, 191, 193, -1, 194, 192,
		              127, -1, 128, 126, 193, -1, 194, 127, 129, -1,
		              130, 128, 193, -1, 194, 129, 131, -1, 130, 193,
		              195, -1, 196, 194, 131, -1, 116, 138, 137, -1,
		              137, 138, 117, -1, 34, 118, 116, -1, 117, 119,
		              35, -1, 114, 116, 137, -1, 137, 117, 115, -1,
		              181, 116, 114, -1, 115, 117, 182, -1, 34, 116,
		              181, -1, 182, 117, 35, -1, 183, 34, 181, -1,
		              182, 35, 184, -1, 179, 181, 114, -1, 115, 182,
		              180, -1, 16, 181, 179, -1, 180, 182, 17, -1,
		              114, 137, 136, -1, 136, 137, 115, -1, 112, 114,
		              136, -1, 136, 115, 113, -1, 179, 114, 112, -1,
		              113, 115, 180, -1, 177, 179, 112, -1, 113, 180,
		              178, -1, 14, 179, 177, -1, 178, 180, 15, -1,
		              16, 179, 14, -1, 15, 180, 17, -1, 112, 136,
		              135, -1, 135, 136, 113, -1, 110, 112, 135, -1,
		              135, 113, 111, -1, 177, 112, 110, -1, 111, 113,
		              178, -1, 12, 14, 177, -1, 178, 15, 13, -1,
		              175, 177, 110, -1, 111, 178, 176, -1, 12, 177,
		              175, -1, 176, 178, 13, -1, 10, 12, 175, -1,
		              176, 13, 11, -1, 110, 135, 134, -1, 134, 135,
		              111, -1, 108, 110, 134, -1, 134, 111, 109, -1,
		              175, 110, 108, -1, 109, 111, 176, -1, 173, 175,
		              108, -1, 109, 176, 174, -1, 10, 175, 173, -1,
		              174, 176, 11, -1, 8, 10, 173, -1, 174, 11,
		              9, -1, 108, 134, 133, -1, 133, 134, 109, -1,
		              106, 108, 133, -1, 133, 109, 107, -1, 173, 108,
		              106, -1, 107, 109, 174, -1, 171, 173, 106, -1,
		              107, 174, 172, -1, 8, 173, 171, -1, 172, 174,
		              9, -1, 6, 8, 171, -1, 172, 9, 7, -1,
		              169, 171, 106, -1, 107, 172, 170, -1, 6, 171,
		              169, -1, 170, 172, 7, -1, 104, 106, 133, -1,
		              133, 107, 105, -1, 169, 106, 104, -1, 105, 107,
		              170, -1, 4, 6, 169, -1, 170, 7, 5, -1,
		              104, 133, 132, -1, 132, 133, 105, -1, 167, 4,
		              169, -1, 170, 5, 168, -1, 167, 169, 104, -1,
		              105, 170, 168, -1, 102, 104, 132, -1, 132, 105,
		              103, -1, 167, 104, 102, -1, 103, 105, 168, -1,
		              102, 132, 156, -1, 156, 132, 103, -1, 165, 167,
		              102, -1, 103, 168, 166, -1, 100, 165, 102, -1,
		              103, 166, 101, -1, 118, 30, 139, -1, 139, 31,
		              119, -1, 32, 30, 118, -1, 119, 31, 33, -1,
		              118, 139, 138, -1, 138, 139, 119, -1, 116, 118,
		              138, -1, 138, 119, 117, -1, 32, 118, 34, -1,
		              35, 119, 33, -1, 34, 183, 36, -1, 37, 184,
		              35, -1, 36, 183, 38, -1, 39, 184, 37, -1,
		              18, 38, 183, -1, 184, 39, 19, -1, 18, 40,
		              38, -1, 39, 41, 19, -1, 44, 185, 46, -1,
		              47, 186, 45, -1, 46, 185, 48, -1, 49, 186,
		              47, -1, 28, 139, 30, -1, 31, 139, 29, -1,
		              140, 139, 28, -1, 29, 139, 140, -1, 140, 28,
		              58, -1, 59, 29, 140, -1, 141, 140, 58, -1,
		              59, 140, 141, -1, 141, 58, 56, -1, 57, 59,
		              141, -1, 142, 141, 56, -1, 57, 141, 142, -1,
		              142, 56, 54, -1, 55, 57, 142, -1, 143, 54,
		              52, -1, 53, 55, 143, -1, 142, 54, 143, -1,
		              143, 55, 142, -1, 52, 120, 143, -1, 143, 121,
		              53, -1, 50, 120, 52, -1, 53, 121, 51, -1,
		              48, 122, 120, -1, 121, 123, 49, -1, 50, 48,
		              120, -1, 121, 49, 51, -1, 122, 205, 120, -1,
		              121, 206, 123, -1, 122, 203, 205, -1, 206, 204,
		              123, -1, 122, 201, 203, -1, 204, 202, 123, -1,
		              124, 146, 145, -1, 145, 146, 125, -1, 126, 146,
		              124, -1, 125, 146, 127, -1, 128, 146, 126, -1,
		              127, 146, 129, -1, 128, 147, 146, -1, 146, 147,
		              129, -1, 201, 145, 144, -1, 144, 145, 202, -1,
		              122, 145, 201, -1, 202, 145, 123, -1, 124, 145,
		              122, -1, 123, 145, 125, -1, 100, 154, 98, -1,
		              99, 154, 101, -1, 100, 155, 154, -1, 154, 155,
		              101, -1, 102, 155, 100, -1, 101, 155, 103, -1,
		              102, 156, 155, -1, 155, 156, 103, -1, 163, 2,
		              165, -1, 166, 3, 164, -1, 0, 2, 163, -1,
		              164, 3, 1, -1, 195, 199, 26, -1, 27, 200,
		              196, -1, 157, 195, 26, -1, 27, 196, 158, -1,
		              130, 195, 157, -1, 158, 196, 131, -1, 161, 163,
		              98, -1, 99, 164, 162, -1, 0, 163, 161, -1,
		              162, 164, 1, -1, 94, 130, 157, -1, 158, 131,
		              95, -1, 161, 98, 96, -1, 97, 99, 162, -1,
		              26, 0, 161, -1, 162, 1, 27, -1, 159, 161,
		              96, -1, 97, 162, 160, -1, 26, 161, 159, -1,
		              160, 162, 27, -1, 157, 26, 159, -1, 160, 27,
		              158, -1, 157, 159, 96, -1, 97, 160, 158, -1,
		              94, 157, 96, -1, 97, 158, 95, -1, 2, 4,
		              167, -1, 168, 5, 3, -1, 165, 2, 167, -1,
		              168, 3, 166, -1, 94, 96, 98, -1, 99, 97,
		              95, -1, 0, 26, 199, -1, 200, 27, 1, -1,
		              0, 199, 2, -1, 3, 200, 1, -1, 120, 205,
		              207, -1, 208, 206, 121, -1, 120, 207, 143, -1,
		              143, 208, 121, -1, 16, 18, 183, -1, 184, 19,
		              17, -1, 16, 183, 181, -1, 182, 184, 17, -1,
		              44, 209, 185, -1, 186, 210, 45, -1, 189, 213,
		              191, -1, 192, 214, 190, -1, 193, 215, 195, -1,
		              196, 216, 194, -1, 130, 224, 128, -1, 129, 225,
		              131, -1, 130, 150, 224, -1, 225, 151, 131, -1,
		              130, 219, 150, -1, 151, 220, 131, -1, 130, 152,
		              219, -1, 220, 153, 131, -1, 94, 98, 221, -1,
		              222, 99, 95, -1, 152, 94, 221, -1, 222, 95,
		              153, -1, 152, 130, 94, -1, 95, 131, 153, -1,
		              221, 98, 154, -1, 154, 99, 222, -1, 221, 154,
		              223, -1, 223, 154, 222, -1, 152, 221, 223, -1,
		              223, 222, 153, -1, 152, 223, 149, -1, 149, 223,
		              153, -1, 219, 152, 218, -1, 218, 153, 220, -1,
		              152, 149, 218, -1, 218, 149, 153, -1, 150, 219,
		              148, -1, 148, 220, 151, -1, 219, 218, 148, -1,
		              148, 218, 220, -1, 224, 150, 217, -1, 217, 151,
		              225, -1, 150, 148, 217, -1, 217, 148, 151, -1,
		              128, 224, 217, -1, 217, 225, 129, -1, 128, 217,
		              147, -1, 147, 217, 129, -1, 197, 199, 215, -1,
		              216, 200, 198, -1, 199, 195, 215, -1, 216, 196,
		              200, -1, 191, 213, 215, -1, 216, 214, 192, -1,
		              191, 215, 193, -1, 194, 216, 192, -1, 187, 211,
		              189, -1, 190, 212, 188, -1, 211, 213, 189, -1,
		              190, 214, 212, -1, 185, 209, 211, -1, 212, 210,
		              186, -1, 185, 211, 187, -1, 188, 212, 186, -1,
		              20, 209, 42, -1, 43, 210, 21, -1, 209, 44,
		              42, -1, 43, 45, 210, -1, 18, 20, 40, -1,
		              41, 21, 19, -1, 20, 42, 40, -1, 41, 43,
		              21, -1, 24, 197, 215, -1, 216, 198, 25, -1,
		              24, 215, 213, -1, 214, 216, 25, -1, 22, 24,
		              211, -1, 212, 25, 23, -1, 24, 213, 211, -1,
		              212, 214, 25, -1, 20, 22, 209, -1, 210, 23,
		              21, -1, 22, 211, 209, -1, 210, 212, 23, -1,
		              98, 163, 165, -1, 166, 164, 99, -1, 98, 165,
		              100, -1, 101, 166, 99, -1
		            ]
		            creaseAngle 0.52
		          }
		        }
		        Shape {
		          appearance Appearance {
		            material DEF DEyeMaterial Material {
		              diffuseColor 0.14 0.14 0.14
		              specularColor 0.401201 0.401201 0.401201
		            }
		          }
		          geometry IndexedFaceSet {
		            coord USE DHeadCoord
		            coordIndex [
		              62, 92, 60, -1, 61, 93, 63, -1, 64, 92,
		              62, -1, 63, 93, 65, -1, 66, 92, 64, -1,
		              65, 93, 67, -1, 68, 92, 66, -1, 67, 93,
		              69, -1, 70, 92, 68, -1, 69, 93, 71, -1,
		              72, 92, 70, -1, 71, 93, 73, -1, 74, 92,
		              72, -1, 73, 93, 75, -1, 76, 92, 74, -1,
		              75, 93, 77, -1, 78, 92, 76, -1, 77, 93,
		              79, -1, 80, 92, 78, -1, 79, 93, 81, -1,
		              82, 92, 80, -1, 81, 93, 83, -1, 84, 92,
		              82, -1, 83, 93, 85, -1, 86, 92, 84, -1,
		              85, 93, 87, -1, 88, 92, 86, -1, 87, 93,
		              89, -1, 90, 92, 88, -1, 89, 93, 91, -1,
		              60, 92, 90, -1, 91, 93, 61, -1
		            ]
		            creaseAngle 0.52
		          }
		        }
		      ]
		    }
		    Camera {
		      translation 0 0.0329074 0.0359816
		      rotation 0 -1 0 3.14159
		      children [
		        DEF DCameraShape Shape {
		          appearance Appearance {
		            material DEF DCameraMaterial Material {
		              diffuseColor 0 0 0
		              specularColor 0.401201 0.401201 0.401201
		            }
		          }
		          geometry IndexedFaceSet {
		            coord Coordinate {
		              point [
		                0.0012902 0.0006454 -0.0016242
		                0.0012902 -0.0018532 -0.0009796
		                -0.0012902 -0.0018532 -0.0009796
		                -0.0012902 0.0006454 -0.0016242
		                0.0030927 0.0010956 0.0001212
		                0.0030927 -0.001403 0.0007657
		                0.0012902 -0.0031483 0.001216
		                -0.0012901 -0.0031484 0.001216
		                -0.0030927 -0.001403 0.0007657
		                -0.0030927 0.0010956 0.0001212
		                0.0012902 0.002841 -0.0003291
		                -0.0012902 0.002841 -0.0003291
		              ]
		            }
		            coordIndex [
		              0, 10, 4, -1, 1, 5, 6, -1, 2, 7,
		              8, -1, 3, 9, 11, -1, 9, 3, 2, -1,
		              9, 2, 8, -1, 10, 0, 3, -1, 10, 3,
		              11, -1, 7, 2, 1, -1, 7, 1, 6, -1,
		              0, 4, 5, -1, 0, 5, 1, -1, 0, 1,
		              2, -1, 0, 2, 3, -1
		            ]
		            creaseAngle 0.2
		          }
		        }
		      ]
		      name "Camera"
		      windowPosition IS cameraWindowPosition
		      fieldOfView 1.0472
		      width IS cameraWidth
		      height IS cameraHeight
		      pixelSize IS cameraPixelSize
		    }
		    DEF DEyeLED LED {
		      rotation 1 0 0 0
		      children [
		        DEF DEyeLEDShape Shape {
		          appearance Appearance {
		            material DEF DLEDMaterial Material {
		              ambientIntensity 0
		              diffuseColor 0.7 0.7 0.7
		            }
		          }
		          geometry IndexedFaceSet {
		            coord Coordinate {
		              point [
		                0.0116412 0.0265999 0.0366955
		                -0.0116412 0.0265999 0.0366955
		                0.0152554 0.0218632 0.0363648
		                -0.0152554 0.0218632 0.0363648
		                0.0201309 0.0187384 0.0349243
		                -0.0201309 0.0187384 0.0349243
		                0.0255253 0.0177015 0.0325931
		                -0.0255253 0.0177015 0.0325931
		                0.0306174 0.0189101 0.0297263
		                -0.0306174 0.0189101 0.0297263
		                0.034632 0.0221804 0.0267603
		                -0.034632 0.0221804 0.0267603
		                0.0369579 0.0270145 0.0241466
		                -0.0369579 0.0270145 0.0241466
		                0.037241 0.0326763 0.0222832
		                -0.037241 0.0326763 0.0222832
		                0.0354382 0.038304 0.0214537
		                -0.0354382 0.038304 0.0214537
		                0.0318239 0.0430408 0.0217844
		                -0.0318239 0.0430408 0.0217844
		                0.0269485 0.0461655 0.023225
		                -0.0269485 0.0461655 0.023225
		                0.0215541 0.0472024 0.0255561
		                -0.0215541 0.0472024 0.0255561
		                0.016462 0.0459938 0.0284229
		                -0.016462 0.0459938 0.0284229
		                0.0124474 0.0427235 0.0313889
		                -0.0124474 0.0427235 0.0313889
		                0.0101215 0.0378894 0.0340026
		                -0.0101215 0.0378894 0.0340026
		                0.0098384 0.0322276 0.035866
		                -0.0098384 0.0322276 0.035866
		                0.0174415 0.0294527 0.0329804
		                -0.0174415 0.0294527 0.0329804
		                0.0192939 0.0270251 0.032811
		                -0.0192939 0.0270251 0.032811
		                0.0217926 0.0254236 0.0320726
		                -0.0217926 0.0254236 0.0320726
		                0.0245573 0.0248921 0.0308779
		                -0.0245573 0.0248921 0.0308779
		                0.0271671 0.0255116 0.0294086
		                -0.0271671 0.0255116 0.0294086
		                0.0292247 0.0271877 0.0278885
		                -0.0292247 0.0271877 0.0278885
		                0.0304167 0.0296652 0.026549
		                -0.0304167 0.0296652 0.026549
		                0.0305618 0.0325669 0.0255939
		                -0.0305618 0.0325669 0.0255939
		                0.0296378 0.0354512 0.0251688
		                -0.0296378 0.0354512 0.0251688
		                0.0277855 0.0378789 0.0253383
		                -0.0277855 0.0378789 0.0253383
		                0.0252868 0.0394803 0.0260766
		                -0.0252868 0.0394803 0.0260766
		                0.022522 0.0400118 0.0272713
		                -0.022522 0.0400118 0.0272713
		                0.0199123 0.0393923 0.0287406
		                -0.0199123 0.0393923 0.0287406
		                0.0178547 0.0377163 0.0302607
		                -0.0178547 0.0377163 0.0302607
		                0.0166627 0.0352387 0.0316003
		                -0.0166627 0.0352387 0.0316003
		                0.0165176 0.032337 0.0325553
		                -0.0165176 0.032337 0.0325553
		              ]
		            }
		            coordIndex [
		              0, 32, 62, -1, 63, 33, 1, -1, 0, 62,
		              30, -1, 31, 63, 1, -1, 0, 2, 34, -1,
		              35, 3, 1, -1, 0, 34, 32, -1, 33, 35,
		              1, -1, 2, 4, 36, -1, 37, 5, 3, -1,
		              2, 36, 34, -1, 35, 37, 3, -1, 6, 8,
		              40, -1, 41, 9, 7, -1, 6, 40, 38, -1,
		              39, 41, 7, -1, 8, 10, 42, -1, 43, 11,
		              9, -1, 8, 42, 40, -1, 41, 43, 9, -1,
		              10, 12, 44, -1, 45, 13, 11, -1, 10, 44,
		              42, -1, 43, 45, 11, -1, 14, 16, 48, -1,
		              49, 17, 15, -1, 14, 48, 46, -1, 47, 49,
		              15, -1, 16, 18, 50, -1, 51, 19, 17, -1,
		              16, 50, 48, -1, 49, 51, 17, -1, 18, 20,
		              52, -1, 53, 21, 19, -1, 18, 52, 50, -1,
		              51, 53, 19, -1, 22, 24, 56, -1, 57, 25,
		              23, -1, 22, 56, 54, -1, 55, 57, 23, -1,
		              24, 26, 58, -1, 59, 27, 25, -1, 24, 58,
		              56, -1, 57, 59, 25, -1, 26, 28, 60, -1,
		              61, 29, 27, -1, 26, 60, 58, -1, 59, 61,
		              27, -1, 28, 30, 62, -1, 63, 31, 29, -1,
		              28, 62, 60, -1, 61, 63, 29, -1, 4, 6,
		              38, -1, 39, 7, 5, -1, 4, 38, 36, -1,
		              37, 39, 5, -1, 12, 14, 46, -1, 47, 15,
		              13, -1, 12, 46, 44, -1, 45, 47, 13, -1,
		              20, 22, 54, -1, 55, 23, 21, -1, 20, 54,
		              52, -1, 53, 55, 21, -1
		            ]
		            creaseAngle 0.2
		          }
		        }
		      ]
		      name "EyeLed"
		      color [
		      ]
		      gradual TRUE
		    }
		    DEF DHeadLED LED {
		      rotation 1 0 0 0
		      children [
		        DEF DHeadLEDShape Shape {
		          appearance Appearance {
		            material USE DLEDMaterial
		          }
		          geometry IndexedFaceSet {
		            coord Coordinate {
		              point [
		                0 0.0488546 0.0285779
		                0 0.057406 0.0180599
		                0.0070464 0.0573781 0.01728
		                -0.0070464 0.0573781 0.01728
		                0.0083894 0.0559858 0.019199
		                -0.0083894 0.0559858 0.019199
		                0.008978 0.0540208 0.0218855
		                -0.008978 0.0540208 0.0218855
		                0.0049843 0.051013 0.0258813
		                -0.0049843 0.051013 0.0258813
		              ]
		            }
		            coordIndex [
		              0, 8, 1, -1, 9, 0, 1, -1, 1, 8,
		              6, -1, 7, 9, 1, -1, 1, 6, 4, -1,
		              5, 7, 1, -1, 1, 4, 2, -1, 3, 5,
		              1, -1
		            ]
		            creaseAngle 0.2
		          }
		        }
		      ]
		      name "HeadLed"
		      color [
		      ]
		      gradual TRUE
		    }
		  ]
		  name "Neck"
		  boundingObject Transform {
		    translation 0 0.022 -0.012
		    rotation 1 0 0 1.5708
		    children [
		      Capsule {
		        height 0.018
		        radius 0.042
		      }
		    ]
		  }
		  physics Physics {
		    density -1
		    mass 0.158042
		    centerOfMass 6.39198e-05 0.0185645 0.00766662
		  }
		  maxForce 2.35
		}
	      ]
	      name "Head"
	      boundingObject Transform {
		translation 0 -0.009 0
		children [
		  Box {
                     size 0.02 0.02 0.02
                  }		  
		]
	      }
	      physics Physics {
		density -1
		mass 0.0243577
		centerOfMass 0.00142428 -0.0165676 -0.000712811
	      }
	      maxForce 2.35
	    }


#End OP head

        DEF R_Shoulder_Pitch Servo {
          translation -0.187 0.334 0
          rotation 1 0 0 0
          children [
            DEF R_Shoulder_Roll Servo {
              rotation 0 0 1 0
              children [
                DEF R_Shoulder_Yaw Servo {
                  children [
                    DEF R_Elbow Servo {
                      translation 0 -0.15 0
                      rotation 1 0 0 0
                      name "R_Elbow"
#added lower arm by SJ
	              children [
	                Transform {
                          translation 0 -0.1475 0
                          children [
                            Shape {
  	                      appearance Appearance {
                   	        material USE DMetalMaterial
  		              }
                              geometry Box {
                                size 0.045 0.222 0.04
                              }
			    }
                          ]
                         }
			]
			boundingObject DEF LowerArm Transform {
	                    translation 0 -0.1475 0
	                    children [
         	             Shape {
                 	       geometry Box {
            	       	         size 0.045 0.222 0.04
	                       }
                             }
	                    ]
                  	}
#end lower arm
                        physics Physics {
                        density -1
                        mass 0.411
                        centerOfMass -0.009 -0.119 0
                        inertiaMatrix [
                          0.002315, 0.002329, 0.000125, 2e-06, 1.4e-05, -0.000112
                        ]
                      }
                      maxVelocity 100
                      maxForce 10000
                    }
                    DEF UpperArm Transform {
                      translation 0 -0.0925 0
                      children [
                        Shape {
                          geometry Box {
                            size 0.045 0.112 0.04
                          }
                        }
                      ]
                    }
                  ]
                  name "R_Shoulder_Yaw"
                  boundingObject DEF UpperArm Transform {
                    translation 0 -0.0925 0
                    children [
                      Shape {
                        geometry Box {
                          size 0.045 0.112 0.04
                        }
                      }
                    ]
                  }
                  physics Physics {
                    density -1
                    mass 0.372
                    centerOfMass 0.004 -0.024 0
                    inertiaMatrix [
                      0.000725, 0.000726, 0.000184, 7e-06, 6.3e-05, 2.7e-05
                    ]
                  }
                  maxVelocity 100
                  maxForce 10000
                }
              ]
              name "R_Shoulder_Roll"
              boundingObject USE NULLSPHERE
              physics Physics {
              }
              maxVelocity 100
              maxForce 10000
            }
          ]
          name "R_Shoulder_Pitch"
          boundingObject USE NULLSPHERE
          physics Physics {
          }
          maxVelocity 100
          maxForce 10000
          controlP 100
        }
        DEF L_Shoulder_Pitch Servo {
          translation 0.187 0.334 0
          rotation -1 0 0 0
          children [
            DEF L_Shoulder_Roll Servo {
              rotation 0 0 -1 0
              children [
                DEF L_Shoulder_Yaw Servo {
                  children [
                    DEF L_Elbow Servo {
                      translation 0 -0.15 0
                      rotation -1 0 0 0
                      name "L_Elbow"
#added lower arm by SJ
	              children [
	                Transform {
                          translation 0 -0.1475 0
                          children [
                            Shape {
  	                      appearance Appearance {
                   	        material USE DMetalMaterial
  		              }
                              geometry Box {
                                size 0.045 0.222 0.04
                              }
			    }
                          ]
                         }
			]
		        boundingObject DEF LowerArm Transform {
	                    translation 0 -0.1475 0
	                    children [
         	             Shape {
                 	       geometry Box {
            	       	         size 0.045 0.222 0.04
	                       }
                             }
	                    ]
                  	}

#end lower arm

                      physics Physics {
                        density -1
                        mass 0.411
                        centerOfMass 0.009 -0.119 0
                        inertiaMatrix [#copied from r_elbow.. may not be correct
                          0.002315, 0.002329, 0.000125, 2e-06, 1.4e-05, -0.000112
                        ]
                      }
                      maxVelocity 100
                      maxForce 10000
                    }
                    USE UpperArm
                  ]
                  name "L_Shoulder_Yaw"
                  boundingObject USE UpperArm
                  physics Physics {
                    density -1
                    mass 0.372
                    centerOfMass -0.004 -0.024 0
                    inertiaMatrix [
                      0.000725, 0.000726, 0.000184, 7e-06, 6.3e-05, 2.7e-05
                    ]
                  }
                  maxVelocity 100
                  maxForce 10000
                }
              ]
              name "L_Shoulder_Roll"
              boundingObject USE NULLSPHERE
              physics Physics {
              }
              maxVelocity 100
              maxForce 10000
            }
          ]
          name "L_Shoulder_Pitch"
          boundingObject USE NULLSPHERE
          physics Physics {
          }
          maxVelocity 100
          maxForce 10000
        }
        DEF Torso Group {
          children [
            Transform {
              translation 0 0.15 0
              children [
                Shape {
                  geometry Box {
                    size 0.048 0.2 0.046
                  }
                }
              ]
            }
            Transform {
              translation 0 0.296 0
              children [
                Shape {
                  geometry Box {
                    size 0.221 0.19 0.133
                  }
                }
              ]
            }
          ]
        }
      ]
      name "Waist_Roll"
      boundingObject DEF Torso Group {
        children [
          Transform {
            translation 0 0.15 0
            children [
              Shape {
                geometry Box {
                  size 0.048 0.2 0.046
                }
              }
            ]
          }
          Transform {
            translation 0 0.296 0
            children [
              Shape {
                geometry Box {
                  size 0.221 0.19 0.133
                }
              }
            ]
          }
        ]
      }
      physics Physics {
        density -1
        mass 1.766
        centerOfMass 0 0.248 0
        inertiaMatrix [
          0.020987, 0.018093, 0.005271, -0.000189, 0.000973, 0.000194
        ]
      }
      maxVelocity 100
      maxForce 10000
    }
  ]
  name "CHARLI"
  boundingObject DEF HipGroup Group {
    children [
      Shape {
        geometry Box {
          size 0.186 0.022 0.069
        }
      }
    ]
  }
  physics Physics {
    density -1
    mass 1.798
    centerOfMass 0 0.023 -0.028
    inertiaMatrix [
      0.010981, 0.010432, 0.016582, -7e-05, 0.001978, 5.4e-05
    ]
  }
  controller "void"
}
}
